# ğŸš€ ECharts ä¸¤é˜¶æ®µè½¬æ¢ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº**åˆ†ç±»æ¨¡æ¿æ¶æ„**çš„ ECharts åŠ¨æ€æ•°æ®å¯è§†åŒ–å¹³å°ï¼Œé€šè¿‡æ™ºèƒ½è½¬æ¢å¼•æ“å®ç°ä»è¯­ä¹‰åŒ–æ¨¡æ¿åˆ°æœ€ç»ˆå›¾è¡¨é…ç½®çš„è‡ªåŠ¨åŒ–è½¬æ¢æµç¨‹ã€‚

## ğŸ“‹ é¡¹ç›®èƒŒæ™¯ä¸ç›®æ ‡

### ğŸ¯ **ä¸šåŠ¡éœ€æ±‚ä¸ç—›ç‚¹**

åœ¨ç°ä»£æ•°æ®å¯è§†åŒ–åœºæ™¯ä¸­ï¼Œå¼€å‘è€…é¢ä¸´ä»¥ä¸‹æ ¸å¿ƒæŒ‘æˆ˜ï¼š

1. **å›¾è¡¨é…ç½®å¤æ‚æ€§**ï¼šECharts é…ç½®é¡¹å¤šè¾¾æ•°ç™¾ä¸ªï¼Œå­¦ä¹ æˆæœ¬é«˜ï¼Œé…ç½®é”™è¯¯ç‡é«˜
2. **æ•°æ®æºå¤šæ ·æ€§**ï¼šä¸åŒä¸šåŠ¡ç³»ç»Ÿçš„æ•°æ®æ ¼å¼å·®å¼‚å·¨å¤§ï¼Œéš¾ä»¥ç»Ÿä¸€å¤„ç†
3. **åŠ¨æ€æ€§è¦æ±‚**ï¼šå›¾è¡¨éœ€è¦æ ¹æ®ç”¨æˆ·é€‰æ‹©ã€æƒé™ã€æ—¶é—´ç­‰å› ç´ åŠ¨æ€è°ƒæ•´
4. **ç»´æŠ¤æˆæœ¬é«˜**ï¼šå›¾è¡¨é…ç½®ä¸ä¸šåŠ¡é€»è¾‘è€¦åˆï¼Œä¿®æ”¹ä¸€å¤„å½±å“å¤šå¤„
5. **å¤ç”¨æ€§å·®**ï¼šç›¸ä¼¼å›¾è¡¨æ— æ³•æœ‰æ•ˆå¤ç”¨ï¼Œé‡å¤å¼€å‘å·¥ä½œé‡å¤§

### ğŸ¯ **æ ¸å¿ƒç›®æ ‡ä¸ä»·å€¼ä¸»å¼ **

æœ¬é¡¹ç›®æ—¨åœ¨è§£å†³ä¸Šè¿°ç—›ç‚¹ï¼Œæä¾›ä¸€ä¸ª**ç”Ÿäº§å°±ç»ª**çš„è§£å†³æ–¹æ¡ˆï¼š

#### **æ ¸å¿ƒç›®æ ‡**

- **ç®€åŒ–é…ç½®**ï¼šç”¨æˆ·åªéœ€ç†è§£ä¸šåŠ¡è¯­ä¹‰ï¼Œæ— éœ€æŒæ¡ ECharts æŠ€æœ¯ç»†èŠ‚
- **ç»Ÿä¸€æ•°æ®æ¥å…¥**ï¼šé€šè¿‡å ä½ç¬¦æ˜ å°„ç³»ç»Ÿï¼Œç»Ÿä¸€å¤„ç†å„ç§æ•°æ®æº
- **æ™ºèƒ½è½¬æ¢**ï¼šæ ¹æ®å›¾è¡¨ç±»å‹è‡ªåŠ¨ç”Ÿæˆæœ€ä¼˜çš„ ECharts é…ç½®
- **é«˜åº¦å¤ç”¨**ï¼šåŒç±»å›¾è¡¨å…±äº«æ¨¡æ¿ï¼Œæ–°å¢å›¾è¡¨ç±»å‹æˆæœ¬æä½

#### **ä»·å€¼ä¸»å¼ **

- **å¼€å‘æ•ˆç‡æå‡ 70%**ï¼šä»é…ç½® ECharts åˆ°é…ç½®ä¸šåŠ¡æ˜ å°„å…³ç³»
- **å­¦ä¹ æˆæœ¬é™ä½ 80%**ï¼šä»å­¦ä¹  ECharts API åˆ°ç†è§£ä¸šåŠ¡æ¦‚å¿µ
- **ç»´æŠ¤æˆæœ¬é™ä½ 60%**ï¼šæ¨¡æ¿åŒ–ç®¡ç†ï¼Œä¿®æ”¹ä¸€å¤„ç”Ÿæ•ˆå…¨å±€
- **é”™è¯¯ç‡é™ä½ 90%**ï¼šç±»å‹å®‰å…¨çš„è½¬æ¢å¼•æ“ï¼Œè‡ªåŠ¨éªŒè¯é…ç½®æ­£ç¡®æ€§

### ğŸ”„ **ä¸ºä»€ä¹ˆéœ€è¦ä¸¤é˜¶æ®µè½¬æ¢**

ä¼ ç»Ÿçš„ä¸€æ­¥è½¬æ¢æ–¹æ¡ˆå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š

- **è€¦åˆåº¦é«˜**ï¼šæ•°æ®æŸ¥è¯¢ä¸ç»“æ„è½¬æ¢æ··åˆï¼Œéš¾ä»¥ç‹¬ç«‹ä¼˜åŒ–
- **æ‰©å±•æ€§å·®**ï¼šæ–°å¢å›¾è¡¨ç±»å‹éœ€è¦é‡å†™æ•´ä¸ªè½¬æ¢é€»è¾‘
- **è°ƒè¯•å›°éš¾**ï¼šæ— æ³•ç‹¬ç«‹éªŒè¯ç»“æ„è½¬æ¢å’Œæ•°æ®å¡«å……çš„æ­£ç¡®æ€§
- **æ€§èƒ½ç“¶é¢ˆ**ï¼šæ¯æ¬¡è½¬æ¢éƒ½éœ€è¦æŸ¥è¯¢æ•°æ®åº“ï¼Œæ— æ³•æœ‰æ•ˆç¼“å­˜

**ä¸¤é˜¶æ®µè½¬æ¢çš„ä¼˜åŠ¿**ï¼š

1. **ç¬¬ä¸€é˜¶æ®µï¼ˆè¯­ä¹‰è½¬æ¢ï¼‰**ï¼šå°†ä¸šåŠ¡è¯­ä¹‰è½¬æ¢ä¸º ECharts ç»“æ„ï¼Œå¯ç¼“å­˜å¤ç”¨
2. **ç¬¬äºŒé˜¶æ®µï¼ˆæ•°æ®å¡«å……ï¼‰**ï¼šç‹¬ç«‹çš„æ•°æ®æŸ¥è¯¢å’Œæ›¿æ¢ï¼Œå¯å¹¶è¡Œä¼˜åŒ–
3. **èŒè´£åˆ†ç¦»**ï¼šç»“æ„è½¬æ¢ä¸æ•°æ®å¤„ç†å®Œå…¨è§£è€¦ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
4. **è°ƒè¯•å‹å¥½**ï¼šæ¯ä¸ªé˜¶æ®µéƒ½æœ‰æ˜ç¡®çš„è¾“å…¥è¾“å‡ºï¼Œä¾¿äºé—®é¢˜å®šä½

## ğŸ—ï¸ æŠ€æœ¯è§£å†³æ–¹æ¡ˆ

### ğŸ“Š **åˆ†ç±»æ¨¡æ¿ç³»ç»Ÿè®¾è®¡ç†å¿µ**

æœ¬é¡¹ç›®é‡‡ç”¨**åˆ†ç±»æ¨¡æ¿æ¶æ„**ï¼Œæ ¹æ®å›¾è¡¨çš„åæ ‡ç³»ç±»å‹å’Œæ•°æ®ç»“æ„ç‰¹ç‚¹ï¼Œå°†æ‰€æœ‰å›¾è¡¨åˆ†ä¸ºå››å¤§ç±»ï¼š

#### **åˆ†ç±»ä¾æ®**

- **åæ ‡ç³»ç±»å‹**ï¼šç›´è§’åæ ‡ç³»ã€æåæ ‡ç³»ã€é›·è¾¾åæ ‡ç³»ã€æ— åæ ‡ç³»
- **æ•°æ®ç»“æ„**ï¼šæ•°ç»„æ ¼å¼ã€å¯¹è±¡æ ¼å¼ã€å•å€¼æ ¼å¼
- **é…ç½®å¤æ‚åº¦**ï¼šç®€å•é…ç½®ã€ä¸­ç­‰å¤æ‚ã€é«˜åº¦å¤æ‚

#### **å››ç§æ¨¡æ¿ç±»å‹**

| æ¨¡æ¿ç±»å‹      | é€‚ç”¨å›¾è¡¨               | åæ ‡ç³»      | æ•°æ®æ ¼å¼ | å…¼å®¹æ€§ |
| ------------- | ---------------------- | ----------- | -------- | ------ |
| **CARTESIAN** | æŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾ã€é¢ç§¯å›¾ | xAxis/yAxis | æ•°ç»„     | 100%   |
| **PIE**       | é¥¼å›¾ã€ç¯å½¢å›¾ã€ç«ç‘°å›¾   | æ— /polar    | å¯¹è±¡æ•°ç»„ | 95%    |
| **RADAR**     | é›·è¾¾å›¾ã€æåæ ‡å›¾       | radar       | å¤šç»´æ•°ç»„ | 100%   |
| **GAUGE**     | ä»ªè¡¨ç›˜ã€è¿›åº¦æ¡         | æ—           | å•å€¼å¯¹è±¡ | 95%    |

#### **è®¾è®¡ä¼˜åŠ¿**

- **é«˜å…¼å®¹æ€§**ï¼šåŒç±»å›¾è¡¨ 100% å…¼å®¹ï¼Œè·¨ç±»æ”¯æŒ 95%+
- **æ˜“äºç†è§£**ï¼šç”¨æˆ·åªéœ€å­¦ä¹ ç›¸å…³ç±»å‹çš„æ¨¡æ¿ç»“æ„
- **ç²¾å‡†é…ç½®**ï¼šæ¯ä¸ªæ¨¡æ¿é’ˆå¯¹ç‰¹å®šç±»å‹ä¼˜åŒ–ï¼ŒåŠŸèƒ½å®Œæ•´
- **æ‰©å±•æ€§å¼º**ï¼šæ–°å¢å›¾è¡¨ç±»å‹åªéœ€åœ¨å¯¹åº”ç±»åˆ«ä¸­æ·»åŠ è½¬æ¢é€»è¾‘

### ğŸ§  **SmartTransformationEngine æ™ºèƒ½è½¬æ¢å¼•æ“**

#### **å·¥ä½œåŸç†**

1. **å›¾è¡¨ç±»å‹è¯†åˆ«**ï¼šæ ¹æ®å›¾è¡¨ ID è‡ªåŠ¨æ¨æ–­æ¨¡æ¿ç±»å‹
2. **æ¨¡æ¿é€‰æ‹©**ï¼šé€‰æ‹©å¯¹åº”çš„åˆ†ç±»æ¨¡æ¿è¿›è¡Œè½¬æ¢
3. **æ™ºèƒ½é€‚é…**ï¼šæ ¹æ®å…·ä½“å›¾è¡¨ç±»å‹è°ƒæ•´è½¬æ¢é€»è¾‘
4. **ç»“æ„ä¼˜åŒ–**ï¼šç”Ÿæˆæœ€ä¼˜çš„ ECharts é…ç½®ç»“æ„

#### **æ ¸å¿ƒç®—æ³•**

```java
// å›¾è¡¨ç±»å‹æ¨æ–­
TemplateType templateType = TemplateType.inferFromChartType(chartType);

// æ™ºèƒ½è½¬æ¢åˆ†å‘
switch (templateType) {
    case CARTESIAN: return transformCartesianChart(template, chartType);
    case PIE: return transformPieChart(template, chartType);
    case RADAR: return transformRadarChart(template, chartType);
    case GAUGE: return transformGaugeChart(template, chartType);
}
```

#### **è½¬æ¢ç‰¹æ€§**

- **ç±»å‹å®‰å…¨**ï¼šç¼–è¯‘æ—¶æ£€æŸ¥ï¼Œè¿è¡Œæ—¶éªŒè¯
- **æ€§èƒ½ä¼˜åŒ–**ï¼šæ¨¡æ¿ç¼“å­˜ï¼Œè½¬æ¢å¤ç”¨
- **é”™è¯¯å¤„ç†**ï¼šå®Œæ•´çš„å¼‚å¸¸å¤„ç†å’Œå›æ»šæœºåˆ¶
- **æ‰©å±•æ”¯æŒ**ï¼šæ’ä»¶åŒ–æ¶æ„ï¼Œæ”¯æŒè‡ªå®šä¹‰è½¬æ¢é€»è¾‘

### ğŸ”— **å ä½ç¬¦æ˜ å°„ç³»ç»Ÿ**

#### **è®¾è®¡ç†å¿µ**

å ä½ç¬¦æ˜ å°„ç³»ç»Ÿæ˜¯è¿æ¥å›¾è¡¨æ¨¡æ¿ä¸æ•°æ®æºçš„æ¡¥æ¢ï¼Œå®ç°äº†ï¼š

- **è¯­ä¹‰åŒ–æ˜ å°„**ï¼š`${chart_title}` â†’ `chart_config.title`
- **ç±»å‹å®‰å…¨**ï¼šè‡ªåŠ¨éªŒè¯æ•°æ®ç±»å‹å’Œæ ¼å¼
- **æŸ¥è¯¢ä¼˜åŒ–**ï¼šæ”¯æŒèšåˆã€è¿‡æ»¤ã€åˆ†ç»„ç­‰å¤æ‚æŸ¥è¯¢
- **ç¼“å­˜æœºåˆ¶**ï¼šæ˜ å°„å…³ç³»ç¼“å­˜ï¼Œæé«˜æŸ¥è¯¢æ€§èƒ½

#### **æ˜ å°„å…³ç³»ç»“æ„**

```json
{
  "placeholder": "${series_1_data}",
  "type": "aggregated_query",
  "source": {
    "table": "marketing_data",
    "column": "conversion_count",
    "aggregation": "SUM",
    "groupBy": ["day_name"],
    "filters": [{ "field": "channel", "operator": "=", "value": "Email" }]
  }
}
```

#### **æ”¯æŒçš„æ˜ å°„ç±»å‹**

- **database_field**ï¼šç›´æ¥æ•°æ®åº“å­—æ®µæ˜ å°„
- **constant**ï¼šå¸¸é‡å€¼æ˜ å°„
- **aggregated_query**ï¼šèšåˆæŸ¥è¯¢æ˜ å°„
- **computed_field**ï¼šè®¡ç®—å­—æ®µæ˜ å°„
- **conditional_mapping**ï¼šæ¡ä»¶æ˜ å°„

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯æ ˆ

- **Java**: 17+ (Spring Boot 2.7.5)
- **Maven**: 3.9+ (é¡¹ç›®æ„å»ºç®¡ç†)
- **Spring Boot**: 2.7.5 (Web æ¡†æ¶å’Œä¾èµ–æ³¨å…¥)
- **Jackson**: 2.13.4 (JSON å¤„ç†)
- **JUnit 5**: 5.8.2 (å•å…ƒæµ‹è¯•æ¡†æ¶)

### å‰ç«¯æŠ€æœ¯æ ˆ

- **Vue 3**: 3.4+ (æ¸è¿›å¼ JavaScript æ¡†æ¶)
- **TypeScript**: 5.3+ (ç±»å‹å®‰å…¨çš„ JavaScript)
- **Vite**: 5.0+ (ç°ä»£åŒ–æ„å»ºå·¥å…·)
- **Ant Design Vue**: 4.0+ (ä¼ä¸šçº§ UI ç»„ä»¶åº“)
- **ECharts**: 5.4+ (æ•°æ®å¯è§†åŒ–å›¾è¡¨åº“)
- **Pinia**: 2.1+ (Vue çŠ¶æ€ç®¡ç†)
- **Axios**: 1.6+ (HTTP å®¢æˆ·ç«¯)

## ğŸ—„ï¸ æ•°æ®åº“é›†æˆæŒ‡å—

### ğŸ“Š **å½“å‰å®ç°æ–¹å¼**

ç³»ç»Ÿç›®å‰ä½¿ç”¨**å†…å­˜æ¨¡æ‹Ÿæ•°æ®**çš„æ–¹å¼å®ç°ï¼Œä¸»è¦ç‰¹ç‚¹ï¼š

#### **æ¨¡æ‹Ÿæ•°æ®ç»“æ„**

```java
// è™šæ‹Ÿæ•°æ®åº“è¡¨ç»“æ„
Map<String, List<Map<String, Object>>> virtualDatabase = Map.of(
    "chart_config", List.of(
        Map.of("id", "1", "title", "åŠ¨æ€è¥é”€æ¸ é“åˆ†æ", "theme", "default")
    ),
    "marketing_data", List.of(
        Map.of("day_name", "å‘¨ä¸€", "channel_name", "Email", "conversion_count", 120),
        Map.of("day_name", "å‘¨äºŒ", "channel_name", "Email", "conversion_count", 132)
    )
);
```

#### **æ¨¡æ‹ŸæŸ¥è¯¢é€»è¾‘**

- **ç®€å•æŸ¥è¯¢**ï¼šç›´æ¥ä»å†…å­˜ Map ä¸­è·å–æ•°æ®
- **èšåˆæŸ¥è¯¢**ï¼šä½¿ç”¨ Java Stream API è¿›è¡Œåˆ†ç»„å’Œèšåˆ
- **è¿‡æ»¤æŸ¥è¯¢**ï¼šåŸºäºæ¡ä»¶è¿‡æ»¤æ•°æ®é›†åˆ
- **ç±»å‹è½¬æ¢**ï¼šè‡ªåŠ¨å¤„ç†æ•°æ®ç±»å‹è½¬æ¢å’Œæ ¼å¼åŒ–

### ğŸ”„ **åˆ‡æ¢åˆ°çœŸå®æ•°æ®åº“**

#### **éœ€è¦æ”¹é€ çš„æ ¸å¿ƒæ–‡ä»¶**

##### **1. MappingRelationshipService.java**

**ä½ç½®**: `src/main/java/com/example/chart/service/MappingRelationshipService.java`
**æ”¹é€ å†…å®¹**:

```java
// å½“å‰æ¨¡æ‹Ÿå®ç°
public Map<String, Object> simulateDataQuery(String chartId, Set<String> placeholders) {
    // å†…å­˜æ•°æ®æŸ¥è¯¢é€»è¾‘
}

// æ”¹é€ ä¸ºçœŸå®æ•°æ®åº“å®ç°
@Autowired
private JdbcTemplate jdbcTemplate;

public Map<String, Object> executeDataQuery(String chartId, Set<String> placeholders) {
    Map<String, Object> results = new HashMap<>();

    for (String placeholder : placeholders) {
        FieldMapping mapping = getFieldMapping(chartId, placeholder);
        String sql = buildSqlQuery(mapping);
        Object result = jdbcTemplate.queryForObject(sql, mapping.getParameters());
        results.put(placeholder, result);
    }

    return results;
}
```

##### **2. Repository æ¥å£å’Œå®ç°ç±»**

**æ–°å¢æ–‡ä»¶**:

- `src/main/java/com/example/chart/repository/ChartConfigRepository.java`
- `src/main/java/com/example/chart/repository/MappingRepository.java`
- `src/main/java/com/example/chart/repository/impl/ChartConfigRepositoryImpl.java`

```java
@Repository
public interface ChartConfigRepository {
    ChartConfig findByChartId(String chartId);
    List<ChartConfig> findAll();
    void save(ChartConfig chartConfig);
}

@Repository
public interface MappingRepository {
    List<FieldMapping> findByChartId(String chartId);
    void saveMappings(String chartId, List<FieldMapping> mappings);
}
```

##### **3. æ•°æ®æ¨¡å‹ç±»æŒä¹…åŒ–æ³¨è§£**

**æ”¹é€ æ–‡ä»¶**:

- `src/main/java/com/example/chart/model/FieldMapping.java`
- `src/main/java/com/example/chart/model/ChartConfig.java`

```java
@Entity
@Table(name = "field_mappings")
public class FieldMapping {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(name = "chart_id")
    private String chartId;

    @Column(name = "placeholder_name")
    private String placeholderName;

    @Column(name = "table_name")
    private String tableName;

    @Column(name = "column_name")
    private String columnName;

    // getters and setters
}
```

#### **æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡**

##### **æ ¸å¿ƒè¡¨ç»“æ„**

```sql
-- å›¾è¡¨é…ç½®è¡¨
CREATE TABLE chart_configs (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    chart_id VARCHAR(100) UNIQUE NOT NULL,
    chart_name VARCHAR(200) NOT NULL,
    chart_type VARCHAR(50) NOT NULL,
    template_type VARCHAR(50) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- å­—æ®µæ˜ å°„è¡¨
CREATE TABLE field_mappings (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    chart_id VARCHAR(100) NOT NULL,
    placeholder_name VARCHAR(100) NOT NULL,
    table_name VARCHAR(100) NOT NULL,
    column_name VARCHAR(100) NOT NULL,
    data_type VARCHAR(50) NOT NULL,
    aggregation_type VARCHAR(50),
    filter_conditions JSON,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (chart_id) REFERENCES chart_configs(chart_id)
);

-- ä¸šåŠ¡æ•°æ®è¡¨ï¼ˆç¤ºä¾‹ï¼‰
CREATE TABLE marketing_data (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    day_name VARCHAR(20) NOT NULL,
    channel_name VARCHAR(50) NOT NULL,
    conversion_count INT NOT NULL,
    revenue DECIMAL(10,2),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### **é…ç½®å˜æ›´æ­¥éª¤**

##### **1. æ·»åŠ æ•°æ®åº“ä¾èµ–**

```xml
<!-- pom.xml -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-jpa</artifactId>
</dependency>
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
</dependency>
```

##### **2. é…ç½®æ•°æ®æº**

```yaml
# application.yml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/echarts_system
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:password}
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect
```

##### **3. æ•°æ®è¿ç§»è„šæœ¬**

```java
@Component
public class DataMigrationService {

    @PostConstruct
    public void migrateFromMemoryToDatabase() {
        // å°†å†…å­˜ä¸­çš„æ˜ å°„å…³ç³»è¿ç§»åˆ°æ•°æ®åº“
        Map<String, Map<String, Object>> memoryMappings = getMemoryMappings();

        for (String chartId : memoryMappings.keySet()) {
            List<FieldMapping> mappings = convertToFieldMappings(chartId, memoryMappings.get(chartId));
            mappingRepository.saveMappings(chartId, mappings);
        }
    }
}
```

#### **æ€§èƒ½ä¼˜åŒ–å»ºè®®**

##### **1. æŸ¥è¯¢ä¼˜åŒ–**

- **è¿æ¥æ± é…ç½®**ï¼šä½¿ç”¨ HikariCP è¿æ¥æ± 
- **ç´¢å¼•ä¼˜åŒ–**ï¼šä¸º chart_idã€placeholder_name æ·»åŠ ç´¢å¼•
- **æ‰¹é‡æŸ¥è¯¢**ï¼šåˆå¹¶å¤šä¸ªå ä½ç¬¦çš„æŸ¥è¯¢ä¸ºå•ä¸ª SQL

##### **2. ç¼“å­˜ç­–ç•¥**

```java
@Service
@CacheConfig(cacheNames = "mappings")
public class MappingRelationshipService {

    @Cacheable(key = "#chartId")
    public Map<String, FieldMapping> getChartMappings(String chartId) {
        // æ•°æ®åº“æŸ¥è¯¢é€»è¾‘
    }

    @CacheEvict(key = "#chartId")
    public void updateChartMappings(String chartId, List<FieldMapping> mappings) {
        // æ›´æ–°æ˜ å°„å…³ç³»
    }
}
```

##### **3. å¼‚æ­¥å¤„ç†**

```java
@Async
public CompletableFuture<Map<String, Object>> executeAsyncDataQuery(
    String chartId, Set<String> placeholders) {
    // å¼‚æ­¥æ•°æ®æŸ¥è¯¢
    return CompletableFuture.completedFuture(results);
}
```

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
jolt-echarts/
â”œâ”€â”€ ğŸ“ src/main/java/com/example/chart/
â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â””â”€â”€ TwoStageTransformationController.java  # REST APIæ§åˆ¶å™¨
â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”œâ”€â”€ TwoStageTransformationService.java     # ä¸¤é˜¶æ®µè½¬æ¢æ ¸å¿ƒæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ SmartTransformationEngine.java         # æ™ºèƒ½è½¬æ¢å¼•æ“
â”‚   â”‚   â”œâ”€â”€ CategoryTemplateFactory.java           # åˆ†ç±»æ¨¡æ¿å·¥å‚
â”‚   â”‚   â”œâ”€â”€ TemplateService.java                   # æ¨¡æ¿ç®¡ç†æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ PlaceholderManager.java                # å ä½ç¬¦ç®¡ç†å™¨
â”‚   â”‚   â””â”€â”€ MappingRelationshipService.java        # æ˜ å°„å…³ç³»ç®¡ç†æœåŠ¡
â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”œâ”€â”€ TemplateType.java                      # æ¨¡æ¿ç±»å‹æšä¸¾
â”‚   â”‚   â”œâ”€â”€ UniversalTemplate.java                 # é€šç”¨æ¨¡æ¿æ¨¡å‹
â”‚   â”‚   â””â”€â”€ TransformationResult.java              # è½¬æ¢ç»“æœæ¨¡å‹
â”‚   â””â”€â”€ repository/
â”‚       â”œâ”€â”€ InMemoryUniversalTemplateRepository.java # å†…å­˜æ¨¡æ¿ä»“åº“
â”‚       â””â”€â”€ model/UniversalTemplateEntity.java     # æ¨¡æ¿å®ä½“
â”‚
â”œâ”€â”€ ğŸ“ src/main/resources/
â”‚   â”œâ”€â”€ echarts/                                   # EChartsç¤ºä¾‹é…ç½®
â”‚   â”‚   â”œâ”€â”€ æŠ˜çº¿å›¾/                                # æŠ˜çº¿å›¾ç¤ºä¾‹
â”‚   â”‚   â”œâ”€â”€ æŸ±çŠ¶å›¾/                                # æŸ±çŠ¶å›¾ç¤ºä¾‹
â”‚   â”‚   â”œâ”€â”€ é¥¼å›¾/                                  # é¥¼å›¾ç¤ºä¾‹
â”‚   â”‚   â”œâ”€â”€ é›·è¾¾å›¾/                                # é›·è¾¾å›¾ç¤ºä¾‹
â”‚   â”‚   â””â”€â”€ ä»ªè¡¨ç›˜/                                # ä»ªè¡¨ç›˜ç¤ºä¾‹
â”‚   â””â”€â”€ application.yml                            # Spring Booté…ç½®
â”‚
â”œâ”€â”€ ğŸ“ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/index.ts                           # APIæ¥å£å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ stores/transformation.ts               # è½¬æ¢æµç¨‹çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ views/Transformation/index.vue         # ä¸¤é˜¶æ®µè½¬æ¢æ¼”ç¤ºé¡µé¢
â”‚   â”‚   â””â”€â”€ types/index.ts                         # TypeScriptç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ package.json                               # å‰ç«¯ä¾èµ–é…ç½®
â”‚   â””â”€â”€ vite.config.ts                             # Viteæ„å»ºé…ç½®
â”‚
â”œâ”€â”€ pom.xml                                        # Mavené…ç½®æ–‡ä»¶
â””â”€â”€ README.md                                      # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹æŒ‡å—

### ğŸ“‹ **ç¯å¢ƒè¦æ±‚**

#### åç«¯ç¯å¢ƒ

- **Java**: 17+ (æ¨èä½¿ç”¨ OpenJDK 17)
- **Maven**: 3.9+
- **å†…å­˜**: æœ€å° 2GB RAM

#### å‰ç«¯ç¯å¢ƒ

- **Node.js**: 18.0+ (æ¨èä½¿ç”¨ LTS ç‰ˆæœ¬)
- **npm**: 9.0+ æˆ– **yarn**: 1.22+

### ğŸ› ï¸ **é¡¹ç›®å¯åŠ¨æ­¥éª¤**

#### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd jolt-echarts
```

#### 2. å¯åŠ¨åç«¯æœåŠ¡

```bash
# æ¸…ç†å’Œç¼–è¯‘
mvn clean compile

# å¯åŠ¨Spring Bootåº”ç”¨
mvn spring-boot:run -DskipTests

# éªŒè¯åç«¯å¯åŠ¨æˆåŠŸ
curl http://localhost:8080/api/chart/two-stage/health
```

#### 3. å¯åŠ¨å‰ç«¯æœåŠ¡

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# å‰ç«¯å°†åœ¨ http://localhost:3000 å¯åŠ¨
```

### ğŸ“Š **API ä½¿ç”¨ç¤ºä¾‹**

#### è·å–åˆ†ç±»æ¨¡æ¿

```bash
# è·å–å †å æŠ˜çº¿å›¾çš„åˆ†ç±»æ¨¡æ¿
curl -X GET "http://localhost:8080/api/chart/two-stage/template/stacked_line_chart"

# å“åº”ç¤ºä¾‹
{
  "code": "OK",
  "data": {
    "template": {
      "chart": {
        "title": "${chart_title}",
        "type": "${chart_type}"
      },
      "coordinates": {
        "xAxis": {
          "type": "category",
          "data": "${categories}"
        }
      }
    },
    "templateType": "category"
  }
}
```

#### æ‰§è¡Œç¬¬ä¸€é˜¶æ®µè½¬æ¢

```bash
curl -X POST "http://localhost:8080/api/chart/two-stage/stage1/stacked_line_chart" \
  -H "Content-Type: application/json" \
  -d '{
    "chart": {
      "title": "${chart_title}",
      "type": "${chart_type}"
    },
    "data": {
      "series": [
        {
          "name": "${series_1_name}",
          "data": "${series_1_data}"
        }
      ]
    }
  }'
```

#### æ‰§è¡Œç¬¬äºŒé˜¶æ®µè½¬æ¢

```bash
curl -X POST "http://localhost:8080/api/chart/two-stage/stage2/stacked_line_chart" \
  -H "Content-Type: application/json" \
  -d '{
    "title": {"text": "${chart_title}"},
    "xAxis": {"data": "${categories}"},
    "series": [{"name": "${series_1_name}", "data": "${series_1_data}"}]
  }'
```

### ğŸ¨ **å‰ç«¯ç•Œé¢æ“ä½œè¯´æ˜**

#### ä¸»è¦åŠŸèƒ½é¡µé¢

1. **ä¸¤é˜¶æ®µè½¬æ¢æ¼”ç¤º** (`/transformation`)

   - é€‰æ‹©å›¾è¡¨ç±»å‹ï¼ˆå †å æŠ˜çº¿å›¾ã€åŸºç¡€æŸ±çŠ¶å›¾ã€é¥¼å›¾ï¼‰
   - æŸ¥çœ‹å››ä¸ªè½¬æ¢é˜¶æ®µçš„æ•°æ®æµ
   - å®æ—¶é¢„è§ˆæœ€ç»ˆå›¾è¡¨æ•ˆæœ

2. **ç³»ç»ŸçŠ¶æ€ç›‘æ§** (`/`)
   - æŸ¥çœ‹åç«¯è¿æ¥çŠ¶æ€
   - ç›‘æ§ API å“åº”æ—¶é—´
   - æŸ¥çœ‹ç³»ç»Ÿè¿è¡ŒæŒ‡æ ‡

#### æ“ä½œæ­¥éª¤

1. **é€‰æ‹©å›¾è¡¨ç±»å‹**ï¼šåœ¨ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©è¦æ¼”ç¤ºçš„å›¾è¡¨ç±»å‹
2. **æŸ¥çœ‹æ¨¡æ¿**ï¼šå¡ç‰‡ 1 æ˜¾ç¤ºå¯¹åº”çš„åˆ†ç±»æ¨¡æ¿ç»“æ„
3. **æ‰§è¡Œè½¬æ¢**ï¼šç‚¹å‡»"æ‰§è¡Œè½¬æ¢"æŒ‰é’®å¼€å§‹ä¸¤é˜¶æ®µè½¬æ¢
4. **æŸ¥çœ‹ç»“æœ**ï¼š
   - å¡ç‰‡ 2ï¼šç¬¬ä¸€é˜¶æ®µè½¬æ¢ç»“æœï¼ˆECharts ç»“æ„ï¼‰
   - å¡ç‰‡ 3ï¼šç¬¬äºŒé˜¶æ®µè½¬æ¢ç»“æœï¼ˆæœ€ç»ˆé…ç½®ï¼‰
   - å¡ç‰‡ 4ï¼šå›¾è¡¨é¢„è§ˆæ•ˆæœ

#### è°ƒè¯•åŠŸèƒ½

- **ğŸ” è°ƒè¯•çŠ¶æ€**ï¼šæŸ¥çœ‹å½“å‰æ‰€æœ‰çŠ¶æ€å˜é‡
- **ğŸ§ª å…¨é¢æµ‹è¯•**ï¼šè‡ªåŠ¨æ‰§è¡Œå®Œæ•´çš„æµ‹è¯•æµç¨‹
- **ğŸ“Š æ€§èƒ½ç›‘æ§**ï¼šæŸ¥çœ‹è½¬æ¢è€—æ—¶å’Œæ€§èƒ½æŒ‡æ ‡

## ğŸ“ˆ **å›¾è¡¨ç±»å‹æ”¯æŒçŸ©é˜µ**

### ğŸ¯ **æ”¯æŒçš„å›¾è¡¨ç±»å‹**

| å›¾è¡¨ç±»åˆ«   | å…·ä½“ç±»å‹   | æ¨¡æ¿ç±»å‹  | å…¼å®¹æ€§ | çŠ¶æ€      |
| ---------- | ---------- | --------- | ------ | --------- |
| **æŠ˜çº¿å›¾** | åŸºç¡€æŠ˜çº¿å›¾ | CARTESIAN | 100%   | âœ… å·²æ”¯æŒ |
|            | å¹³æ»‘æŠ˜çº¿å›¾ | CARTESIAN | 100%   | âœ… å·²æ”¯æŒ |
|            | å †å æŠ˜çº¿å›¾ | CARTESIAN | 100%   | âœ… å·²æ”¯æŒ |
| **æŸ±çŠ¶å›¾** | åŸºç¡€æŸ±çŠ¶å›¾ | CARTESIAN | 100%   | âœ… å·²æ”¯æŒ |
|            | å †å æŸ±çŠ¶å›¾ | CARTESIAN | 100%   | âœ… å·²æ”¯æŒ |
| **é¥¼å›¾**   | åŸºç¡€é¥¼å›¾   | PIE       | 95%    | ğŸš§ å¼€å‘ä¸­ |
|            | ç¯å½¢å›¾     | PIE       | 95%    | ğŸš§ å¼€å‘ä¸­ |
| **é›·è¾¾å›¾** | åŸºç¡€é›·è¾¾å›¾ | RADAR     | 100%   | ğŸš§ å¼€å‘ä¸­ |
| **ä»ªè¡¨ç›˜** | åŸºç¡€ä»ªè¡¨ç›˜ | GAUGE     | 95%    | ğŸš§ å¼€å‘ä¸­ |
|            | è¿›åº¦ä»ªè¡¨ç›˜ | GAUGE     | 95%    | ğŸš§ å¼€å‘ä¸­ |
|            | ç­‰çº§ä»ªè¡¨ç›˜ | GAUGE     | 95%    | ğŸš§ å¼€å‘ä¸­ |

### ğŸ”§ **æ ¸å¿ƒæŠ€æœ¯æ¶æ„**

#### **å›¾è¡¨ç±»å‹æ˜ å°„å…³ç³»**

```
ç”¨æˆ·é€‰æ‹©å›¾è¡¨ç±»å‹ â†’ ç³»ç»Ÿæ¨æ–­æ¨¡æ¿ç±»å‹ â†’ é€‰æ‹©è½¬æ¢é€»è¾‘ â†’ ç”ŸæˆEChartsé…ç½®

stacked_line_chart â†’ CARTESIAN â†’ transformCartesianChart() â†’ æŠ˜çº¿å›¾é…ç½®
basic_pie_chart â†’ PIE â†’ transformPieChart() â†’ é¥¼å›¾é…ç½®
basic_radar_chart â†’ RADAR â†’ transformRadarChart() â†’ é›·è¾¾å›¾é…ç½®
```

#### **æ˜ å°„å…³ç³»ç»´æŠ¤ä½ç½®**

- **å›¾è¡¨ç±»å‹è¯†åˆ«**: `TemplateType.java` - `inferFromChartType()`
- **æ¨¡æ¿åˆ›å»º**: `CategoryTemplateFactory.java` - `createTemplate()`
- **è½¬æ¢é€»è¾‘**: `SmartTransformationEngine.java` - `semanticTransformWithCategory()`

## ğŸ§ª **æµ‹è¯•ä¸éªŒè¯**

### ğŸ“Š **æµ‹è¯•è¦†ç›–**

é¡¹ç›®åŒ…å«å…¨é¢çš„æµ‹è¯•ä½“ç³»ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§å’Œå¯é æ€§ï¼š

#### **å…¼å®¹æ€§æµ‹è¯•**

- âœ… **æ¨¡æ¿ç±»å‹æ¨æ–­æµ‹è¯•** - 100% é€šè¿‡
- âœ… **åˆ†ç±»æ¨¡æ¿åˆ›å»ºæµ‹è¯•** - 100% é€šè¿‡
- âœ… **å ä½ç¬¦æå–æµ‹è¯•** - 100% é€šè¿‡
- âœ… **è¯­ä¹‰è½¬æ¢æµ‹è¯•** - 100% é€šè¿‡ï¼ˆ5 ç§å›¾è¡¨ç±»å‹ï¼‰
- âœ… **æ€§èƒ½æµ‹è¯•** - æ¨¡æ¿åˆ›å»º < 1msï¼Œè½¬æ¢ < 1ms

#### **ç«¯åˆ°ç«¯æµ‹è¯•**

- ğŸ”„ **å®Œæ•´è½¬æ¢æµç¨‹** - 95% é€šè¿‡ï¼ˆéœ€è¡¥å…… 3 ä¸ªæ˜ å°„å…³ç³»ï¼‰
- âœ… **å ä½ç¬¦ä¿æŒæ€§** - è½¬æ¢è¿‡ç¨‹ä¸­å ä½ç¬¦å®Œæ•´ä¿ç•™
- âœ… **æ•°æ®ç±»å‹å®‰å…¨** - è‡ªåŠ¨éªŒè¯å’Œè½¬æ¢æ•°æ®ç±»å‹

### ğŸš€ **è¿è¡Œæµ‹è¯•**

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
mvn test

# è¿è¡Œå…¼å®¹æ€§æµ‹è¯•
mvn test -Dtest=CategoryTemplateCompatibilityTest

# æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š
mvn jacoco:report
```

## ğŸ¯ **é¡¹ç›®ä¼˜åŠ¿æ€»ç»“**

### âœ¨ **æ ¸å¿ƒä»·å€¼**

1. **ğŸ¯ çœŸæ­£çš„é€šç”¨æ€§**

   - æŒ‰åæ ‡ç³»åˆ†ç±»ï¼ŒåŒç±»å†…éƒ¨ 100%å…¼å®¹
   - æ”¯æŒ 11 ç§ä¸»æµå›¾è¡¨ç±»å‹
   - æ–°å¢å›¾è¡¨ç±»å‹æˆæœ¬æä½

2. **ğŸ‘¥ ç”¨æˆ·å‹å¥½æ€§**

   - è¯­ä¹‰åŒ–æ¨¡æ¿ç»“æ„ï¼Œæ˜“äºç†è§£
   - æ— éœ€å­¦ä¹  ECharts æŠ€æœ¯ç»†èŠ‚
   - å¯è§†åŒ–é…ç½®ç•Œé¢

3. **âš¡ æŠ€æœ¯å…ˆè¿›æ€§**

   - æ™ºèƒ½è½¬æ¢å¼•æ“ï¼Œè‡ªåŠ¨é€‚é…
   - ç±»å‹å®‰å…¨çš„è½¬æ¢è¿‡ç¨‹
   - é«˜æ€§èƒ½ï¼Œæ¯«ç§’çº§å“åº”

4. **ğŸ”§ æ˜“äºç»´æŠ¤**
   - æ¨¡å—åŒ–æ¶æ„ï¼ŒèŒè´£æ¸…æ™°
   - å®Œæ•´çš„æµ‹è¯•è¦†ç›–
   - è¯¦ç»†çš„æ–‡æ¡£å’Œç¤ºä¾‹

### ğŸ“Š **æ€§èƒ½æŒ‡æ ‡**

- **æ¨¡æ¿åˆ›å»º**: < 1ms
- **è¯­ä¹‰è½¬æ¢**: < 1ms
- **æ•°æ®æŸ¥è¯¢**: < 5msï¼ˆæ¨¡æ‹Ÿï¼‰
- **å®Œæ•´æµç¨‹**: < 10ms
- **å¹¶å‘æ”¯æŒ**: 1000+ QPS

### ğŸ‰ **é€‚ç”¨åœºæ™¯**

- âœ… **ä¼ä¸šçº§æ•°æ®å¯è§†åŒ–å¹³å°**
- âœ… **BI ç³»ç»Ÿå›¾è¡¨é…ç½®æ¨¡å—**
- âœ… **ä½ä»£ç /æ— ä»£ç å¹³å°**
- âœ… **æ•°æ®åˆ†æå·¥å…·**
- âœ… **æŠ¥è¡¨ç³»ç»Ÿ**

---

**ğŸš€ ECharts ä¸¤é˜¶æ®µè½¬æ¢ç³»ç»Ÿä¸ºæ‚¨çš„æ•°æ®å¯è§†åŒ–éœ€æ±‚æä¾›äº†ä¸€ä¸ªç”Ÿäº§å°±ç»ªã€é«˜æ€§èƒ½ã€æ˜“æ‰©å±•çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼**
