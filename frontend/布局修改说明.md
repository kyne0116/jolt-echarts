# 两阶段演示应用前端布局修改说明

## 修改概述

针对两阶段演示应用的前端页面布局可视性问题，进行了全面的布局重构，确保三个主要区域在页面中完全可见且不重叠。

## 主要问题分析

### 原有问题
1. **高度分配不合理**：各区域使用固定的vh单位，总高度可能超过100vh
2. **缺乏整体布局控制**：没有使用合适的flexbox布局来管理空间分配
3. **滚动处理不当**：主容器设置了min-height: 100vh但没有处理溢出
4. **响应式布局失效**：在不同屏幕尺寸下布局重叠或内容被截断

### 解决方案

## 核心布局修改

### 1. 主容器布局 (.transformation-demo)
```css
.transformation-demo {
  padding: 16px;
  height: 100vh;           /* 固定高度为视口高度 */
  display: flex;
  flex-direction: column;
  overflow: hidden;        /* 防止整体页面滚动 */
}
```

### 2. 配置区域 (.config-header-compact)
```css
.config-header-compact {
  flex-shrink: 0;          /* 不允许收缩 */
  height: auto;
  max-height: 280px;       /* 限制最大高度 */
  overflow-y: auto;        /* 内容溢出时显示滚动条 */
}
```

### 3. 主要内容区域 (.main-content-area)
```css
.main-content-area {
  flex: 1;                 /* 占据剩余空间 */
  overflow: hidden;
  display: flex;
  flex-direction: column;
}
```

### 4. 进度指示器 (.progress-panel)
```css
.progress-panel {
  flex-shrink: 0;          /* 不允许收缩 */
  margin-top: 12px;
}
```

## 卡片布局优化

### 图表预览卡片
```css
.chart-preview-card {
  height: 100%;
  display: flex;
  flex-direction: column;
  
  .chart-wrapper {
    flex: 1;               /* 占据卡片剩余空间 */
    min-height: 300px;
  }
}
```

### 数据流卡片
```css
.data-card {
  height: 100%;
  display: flex;
  flex-direction: column;
  
  .ant-card-body {
    flex: 1;               /* 占据卡片剩余空间 */
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }
  
  .json-viewer {
    flex: 1;               /* 占据body剩余空间 */
    min-height: 300px;
    overflow: auto;        /* 内容溢出时显示滚动条 */
  }
}
```

## 响应式布局改进

### 桌面端 (≥1200px)
- 数据流卡片水平排列
- 图表预览占据左侧1/3空间
- 数据流区域占据右侧2/3空间

### 平板端 (768px-1199px)
- 数据流卡片垂直排列
- 保持左右分栏布局

### 移动端 (≤768px)
```css
@media (max-width: 768px) {
  .main-content-area {
    flex-direction: column;
  }
  
  .chart-preview-card {
    height: 300px;
    min-height: 300px;
  }
  
  .data-card {
    height: 280px;
    min-height: 280px;
  }
  
  .data-flow {
    flex-direction: column;
    gap: 12px;
  }
}
```

## 关键技术要点

### 1. Flexbox布局体系
- 使用flex容器管理垂直空间分配
- flex-shrink: 0 确保头部和底部区域不被压缩
- flex: 1 让主内容区域占据剩余空间

### 2. 高度管理策略
- 主容器使用固定的100vh高度
- 子区域使用flex属性而非固定高度
- 内容溢出时在适当层级添加滚动条

### 3. 嵌套布局处理
- 卡片内部也使用flexbox布局
- 确保内容区域能够正确填充和滚动

## 修改文件

### 主要修改文件
- `frontend/src/views/Transformation/index.vue`

### 测试文件
- `frontend/layout-test.html` - 布局测试页面

## 验证方法

1. **桌面端测试**：在1920x1080分辨率下验证三个区域完全可见
2. **平板端测试**：在768px-1199px宽度下验证布局适应性
3. **移动端测试**：在375px宽度下验证垂直布局
4. **内容溢出测试**：验证各区域内容溢出时的滚动行为

## 预期效果

✅ **上部区域**：选择操作区 + 选择结果显示区 - 固定高度，内容溢出时滚动
✅ **中间区域**：图表展示区 + 数据卡片区 - 占据剩余空间，各卡片内部可滚动  
✅ **底部区域**：进度指示器 - 固定高度，始终可见

## 兼容性说明

- 支持现代浏览器（Chrome 60+, Firefox 60+, Safari 12+）
- 使用标准CSS Flexbox，无需额外polyfill
- 保持与Ant Design Vue组件的兼容性
