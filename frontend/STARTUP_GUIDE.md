# 🚀 ECharts动态数据流前端启动和验证指南

## **📋 前置条件检查**

### **1. 环境要求**
- ✅ Node.js >= 18.0.0
- ✅ npm >= 9.0.0 或 yarn >= 1.22.0
- ✅ 后端服务运行在 http://localhost:8080

### **2. 验证环境**
```bash
# 检查Node.js版本
node --version

# 检查npm版本
npm --version

# 检查后端服务状态
curl http://localhost:8080/api/chart/two-stage/health
```

## **🛠️ 安装和启动步骤**

### **步骤1: 进入前端目录**
```bash
cd jolt-demo/frontend
```

### **步骤2: 安装依赖**
```bash
# 使用npm安装
npm install

# 或使用yarn安装
yarn install
```

### **步骤3: 启动开发服务器**
```bash
# 使用npm启动
npm run dev

# 或使用yarn启动
yarn dev
```

### **步骤4: 验证启动成功**
- 浏览器自动打开 http://localhost:3000
- 看到"ECharts动态数据流管理平台"界面
- 左侧导航菜单正常显示
- 右上角系统状态显示"已连接"

## **🧪 功能验证清单**

### **1. 系统连接验证**
- [ ] 右上角状态指示器显示绿色"已连接"
- [ ] 底部状态栏显示最后心跳时间
- [ ] 无错误提示信息

### **2. 仪表板功能验证**
- [ ] 统计卡片显示正确数据
- [ ] 系统状态卡片显示后端连接信息
- [ ] 快速操作按钮可以正常点击
- [ ] 示例图表预览正常渲染

### **3. 两阶段转换演示验证**
```bash
# 验证步骤：
1. 点击左侧菜单"两阶段转换演示"
2. 选择图表类型"堆叠折线图"
3. 点击"执行完整转换"按钮
4. 观察转换进度条和步骤状态
5. 验证四个数据卡片的内容变化
6. 确认最终图表预览正常显示
```

**预期结果：**
- [ ] 转换进度显示100%
- [ ] 所有步骤状态为"已完成"
- [ ] 通用JSON模板显示带占位符的数据
- [ ] 第一阶段输出显示ECharts结构（保持占位符）
- [ ] 第二阶段输出显示最终配置（无占位符）
- [ ] 图表预览显示完整的堆叠折线图

### **4. 占位符映射管理验证**
```bash
# 验证步骤：
1. 点击左侧菜单"占位符映射管理"
2. 选择图表类型"堆叠折线图"
3. 查看映射关系表格
4. 点击"新增映射"按钮
5. 填写映射信息并保存
6. 测试映射关系功能
```

**预期结果：**
- [ ] 映射关系表格显示现有映射
- [ ] 统计数据正确显示（14个映射关系）
- [ ] 新增映射模态框正常打开
- [ ] 表单验证正常工作
- [ ] 测试功能返回模拟数据

### **5. 其他页面验证**
- [ ] 图表配置管理页面正常加载
- [ ] Jolt规范管理页面正常加载
- [ ] 通用JSON模板页面正常加载
- [ ] 虚拟数据库管理页面正常加载
- [ ] 系统设置页面显示系统信息

## **🔧 常见问题排查**

### **问题1: 依赖安装失败**
```bash
# 解决方案：
1. 清理npm缓存
npm cache clean --force

2. 删除node_modules重新安装
rm -rf node_modules package-lock.json
npm install

3. 使用国内镜像源
npm config set registry https://registry.npmmirror.com
npm install
```

### **问题2: 启动失败**
```bash
# 检查端口占用
netstat -ano | findstr :3000

# 使用其他端口启动
npm run dev -- --port 3001
```

### **问题3: 后端连接失败**
```bash
# 检查后端服务状态
curl http://localhost:8080/api/chart/two-stage/health

# 检查代理配置
# 确认vite.config.ts中的proxy配置正确
```

### **问题4: 图表不显示**
```bash
# 检查控制台错误信息
# 确认ECharts依赖正确安装
npm list echarts

# 重新安装ECharts
npm uninstall echarts
npm install echarts@^5.4.3
```

## **📊 性能验证**

### **1. 加载性能**
- [ ] 首页加载时间 < 3秒
- [ ] 页面切换响应时间 < 1秒
- [ ] API请求响应时间 < 2秒

### **2. 内存使用**
- [ ] 初始内存占用 < 100MB
- [ ] 长时间使用无明显内存泄漏
- [ ] 图表渲染内存占用合理

### **3. 兼容性验证**
- [ ] Chrome 90+ 正常运行
- [ ] Firefox 88+ 正常运行
- [ ] Safari 14+ 正常运行
- [ ] Edge 90+ 正常运行

## **🎯 完整验证流程**

### **端到端验证场景**
```bash
1. 启动后端服务
   cd jolt-demo
   mvn spring-boot:run

2. 启动前端服务
   cd jolt-demo/frontend
   npm run dev

3. 打开浏览器访问 http://localhost:3000

4. 执行完整转换流程：
   - 进入"两阶段转换演示"页面
   - 选择"堆叠折线图"
   - 点击"执行完整转换"
   - 验证转换结果和图表预览

5. 管理映射关系：
   - 进入"占位符映射管理"页面
   - 查看现有映射关系
   - 测试映射功能

6. 系统监控：
   - 检查系统状态
   - 验证心跳检测
   - 查看系统信息
```

## **✅ 验证成功标准**

### **基础功能验证通过标准：**
- ✅ 前端应用正常启动和访问
- ✅ 与后端API连接正常
- ✅ 所有页面可以正常加载
- ✅ 两阶段转换演示完整执行成功
- ✅ 映射关系管理功能正常
- ✅ 图表预览正常显示
- ✅ 无JavaScript错误和警告

### **高级功能验证通过标准：**
- ✅ 实时状态监控正常
- ✅ 数据流可视化清晰
- ✅ 用户交互响应及时
- ✅ 错误处理机制完善
- ✅ 响应式设计适配良好

## **📞 技术支持**

如果在验证过程中遇到问题，请：

1. **检查控制台错误信息**
2. **查看网络请求状态**
3. **确认后端服务正常运行**
4. **参考本文档的问题排查部分**

---

**🎉 验证完成后，您就可以开始使用ECharts动态数据流管理平台了！**
